{
  "name": "release",
  "description": "Generate a release script for versioning, building, and publishing to GitHub",
  "instructions": "When the user invokes /release [patch|minor|major], generate a complete bash script that:\n\n1. **Version Bump**: Run `npm version [type] --no-git-tag-version` to update package.json\n   - Default to 'patch' if no argument provided\n   - Types: patch (1.0.0 → 1.0.1), minor (1.0.0 → 1.1.0), major (1.0.0 → 2.0.0)\n\n2. **Get New Version**: Extract version from package.json using `node -p \"require('./package.json').version\"`\n\n3. **Verification**: Check for uncommitted changes before proceeding\n\n4. **User Confirmation**: Ask user to confirm before continuing\n\n5. **Git Operations**:\n   - Commit package.json with message: \"chore: bump version to v{VERSION}\"\n   - Create git tag: v{VERSION}\n   - Push to origin main\n   - Push tag to origin\n\n6. **Build**: Run `pnpm build:prod:win`\n\n7. **GitHub Release**: Use `gh release create` with:\n   - Title: \"Open Uploader v{VERSION}\"\n   - Auto-generated or provided release notes\n   - Upload files:\n     * ./dist/open-uploader-{VERSION}-setup.exe\n     * ./dist/open-uploader-{VERSION}-setup.exe.blockmap\n     * ./dist/latest.yml\n\n8. **Success Message**: Show release URL\n\n## Script Requirements:\n- Use `set -e` for error handling\n- Include clear progress messages with emojis\n- Save as `release-v{VERSION}.sh` in project root\n- Make executable with `chmod +x`\n- Handle all edge cases (uncommitted changes, build failures, etc.)\n\n## Project Details:\n- Package Manager: pnpm\n- Build Command: pnpm build:prod:win\n- Repository: BarrySong97/OpenUploader\n- Main Branch: main\n- Required Files: .exe, .exe.blockmap, latest.yml (CRITICAL for auto-update)\n\n## Example Script Structure:\n```bash\n#!/bin/bash\nset -e\n\nVERSION_TYPE=\"${1:-patch}\"\n\n# Verify no uncommitted changes\nif [[ -n $(git status -s) ]]; then\n    echo \"❌ Error: Uncommitted changes detected\"\n    exit 1\nfi\n\n# Bump version\nnpm version $VERSION_TYPE --no-git-tag-version\nNEW_VERSION=$(node -p \"require('./package.json').version\")\n\n# Confirm\nread -p \"Create release v$NEW_VERSION? (y/n) \" -n 1 -r\nif [[ ! $REPLY =~ ^[Yy]$ ]]; then\n    git checkout package.json\n    exit 1\nfi\n\n# Git operations\ngit add package.json\ngit commit -m \"chore: bump version to v$NEW_VERSION\"\ngit tag \"v$NEW_VERSION\"\ngit push origin main\ngit push origin \"v$NEW_VERSION\"\n\n# Build\npnpm build:prod:win\n\n# Release\ngh release create \"v$NEW_VERSION\" \\\n  --title \"Open Uploader v$NEW_VERSION\" \\\n  --generate-notes \\\n  ./dist/open-uploader-$NEW_VERSION-setup.exe \\\n  ./dist/open-uploader-$NEW_VERSION-setup.exe.blockmap \\\n  ./dist/latest.yml\n\necho \"✅ Release complete: https://github.com/BarrySong97/OpenUploader/releases/tag/v$NEW_VERSION\"\n```\n\nGenerate the complete script, save it to the project, make it executable, and provide usage instructions."
}
